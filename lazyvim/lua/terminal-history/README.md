# Terminal History Plugin –¥–ª—è Neovim

## üìã –û—Ç—á—ë—Ç –æ –ø—Ä–æ–¥–µ–ª–∞–Ω–Ω–æ–π —Ä–∞–±–æ—Ç–µ

### ‚úÖ –§–∞–∑–∞ 1: MVP (–ë–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª) - –ó–ê–í–ï–†–®–ï–ù–ê

#### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

1. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–ª–∞–≥–∏–Ω–∞**
   - ‚úÖ `init.lua` - –≥–ª–∞–≤–Ω—ã–π –º–æ–¥—É–ª—å —Å —Ç–æ—á–∫–æ–π –≤—Ö–æ–¥–∞ –∏ setup —Ñ—É–Ω–∫—Ü–∏–µ–π
   - ‚úÖ `core.lua` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–º–∏ —Å–µ—Å—Å–∏—è–º–∏ (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ)
   - ‚úÖ `storage.lua` - —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –≤ JSON —Ñ–∞–π–ª–∞—Ö (–æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞)
   - ‚úÖ `capture.lua` - –ø–µ—Ä–µ—Ö–≤–∞—Ç –∫–æ–º–∞–Ω–¥ –∏ –≤—ã–≤–æ–¥–∞ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã—Ö –±—É—Ñ–µ—Ä–∞—Ö
   - ‚úÖ `ui.lua` - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏
   - ‚úÖ `commands.lua` - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∫–æ–º–∞–Ω–¥
   - ‚úÖ `config.lua` - —Å–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
   - ‚úÖ `utils.lua` - –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

2. **–û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**
   - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª–æ–≤ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
   - ‚úÖ –û—Ç–¥–µ–ª—å–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ (–∏–∑–æ–ª—è—Ü–∏—è –ø–æ terminal_job_id)
   - ‚úÖ –ü–µ—Ä–µ—Ö–≤–∞—Ç –∫–æ–º–∞–Ω–¥ —á–µ—Ä–µ–∑ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–º–ø—Ç–æ–≤ (bash, zsh, fish, etc.)
   - ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ –∫–æ–º–∞–Ω–¥
   - ‚úÖ –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ JSON —Ñ–∞–π–ª–∞—Ö
   - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è –∏—Å—Ç–æ—Ä–∏–∏ (–ª–∏–º–∏—Ç –∑–∞–ø–∏—Å–µ–π)
   - ‚úÖ –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∏—Å—Ç–æ—Ä–∏–π –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é

3. **–°–æ—Ö—Ä–∞–Ω—è–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥—ã**
   - ‚úÖ –¢–µ–∫—Å—Ç –∫–æ–º–∞–Ω–¥—ã
   - ‚úÖ –ü–æ–ª–Ω—ã–π –≤—ã–≤–æ–¥ (stdout/stderr)
   - ‚úÖ –í—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
   - ‚úÖ –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
   - ‚úÖ –†–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è (cwd)
   - ‚úÖ ID —Ç–µ—Ä–º–∏–Ω–∞–ª–∞

4. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**
   - ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –±—É—Ñ–µ—Ä–µ
   - ‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏
   - ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∏—Å—Ç–æ—Ä–∏–∏ –∫–æ–º–∞–Ω–¥
   - ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–ª–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ –∫–æ–º–∞–Ω–¥—ã –≤ split –æ–∫–Ω–µ
   - ‚úÖ –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã—Ö —Å–µ—Å—Å–∏–π

5. **–ö–æ–º–∞–Ω–¥—ã –ø–ª–∞–≥–∏–Ω–∞**
   - ‚úÖ `:TerminalHistory [id]` - –ø–æ–∫–∞–∑–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∏–ª–∏ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞
   - ‚úÖ `:TerminalHistoryList` - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª–æ–≤
   - ‚úÖ `:TerminalHistoryCurrent` - —è–≤–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Ç–µ–∫—É—â–µ–≥–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞
   - ‚úÖ `:TerminalHistoryClear [id]` - –æ—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é
   - ‚úÖ `:TerminalHistoryToggle` - –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ
   - ‚úÖ `:TerminalHistoryExport` - —ç–∫—Å–ø–æ—Ä—Ç –∏—Å—Ç–æ—Ä–∏–∏ –≤ —Ñ–∞–π–ª
   - ‚úÖ `:TerminalHistoryCleanup` - –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∏—Å—Ç–æ—Ä–∏–π

6. **–ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏**
   - ‚úÖ `<Ctrl-T>h` - –æ—Ç–∫—Ä—ã—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∏–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
   - ‚úÖ `<leader>th` - –æ—Ç–∫—Ä—ã—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ (normal mode)
   - ‚úÖ `<leader>tH` - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª–æ–≤
   - ‚úÖ –í –±—É—Ñ–µ—Ä–µ –∏—Å—Ç–æ—Ä–∏–∏:
     - `<CR>` - –ø—Ä–æ—Å–º–æ—Ç—Ä –≤—ã–≤–æ–¥–∞ (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–∫–Ω–æ)
     - `o` - –ø—Ä–æ—Å–º–æ—Ç—Ä –≤—ã–≤–æ–¥–∞ –≤ –Ω–æ–≤–æ–º –æ–∫–Ω–µ
     - `<Shift-CR>` - —Ç–æ –∂–µ, —á—Ç–æ `o`
     - `<C-y>` - –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
     - `<C-d>` - —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏
     - `r` - –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
     - `q` - –∑–∞–∫—Ä—ã—Ç—å –±—É—Ñ–µ—Ä –∏—Å—Ç–æ—Ä–∏–∏
     - `R` - –æ–±–Ω–æ–≤–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é

7. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**
   - ‚úÖ –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ (clear, exit, etc.)
   - ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
   - ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –≤—ã–≤–æ–¥–∞
   - ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã/–≤—Ä–µ–º–µ–Ω–∏
   - ‚úÖ –û–ø—Ü–∏—è –ø–æ–∫–∞–∑–∞ ID —Ç–µ—Ä–º–∏–Ω–∞–ª–∞

8. **–•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**
   - ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞: `~/.local/share/nvim/terminal-history/`
   - ‚úÖ –û—Ç–¥–µ–ª—å–Ω—ã–π JSON —Ñ–∞–π–ª –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞
   - ‚úÖ –§–∞–π–ª sessions.json —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –≤—Å–µ—Ö —Å–µ—Å—Å–∏–π
   - ‚úÖ –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞

## üìù –ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å —Å–¥–µ–ª–∞—Ç—å

### üöß –§–∞–∑–∞ 2: –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª (2-3 –¥–Ω—è)

1. **Telescope –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –í—ã—Å–æ–∫–∏–π)
   - [ ] –°–æ–∑–¥–∞—Ç—å custom picker –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏
   - [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ:
     - –¢–µ–∫—Å—Ç—É –∫–æ–º–∞–Ω–¥—ã
     - –°–æ–¥–µ—Ä–∂–∏–º–æ–º—É –≤—ã–≤–æ–¥–∞
     - –î–∞—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
     - ID —Ç–µ—Ä–º–∏–Ω–∞–ª–∞
   - [x] Preview window –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—ã–≤–æ–¥–∞
   - [x] Actions –∏–∑ picker:
     - –û—Ç–∫—Ä—ã—Ç—å –≤ –±—É—Ñ–µ—Ä–µ (Enter)
     - –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É (<C-y>)
     - –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—ã–≤–æ–¥ (<C-o>)
     - –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ (<C-r>)
     - –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –ø–µ—Ä–µ–Ω–æ—Å —Å—Ç—Ä–æ–∫ –≤ –ø—Ä–µ–≤—å—é (<C-w>)

2. **–£–ª—É—á—à–µ–Ω–∏–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –∫–æ–º–∞–Ω–¥** (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –°—Ä–µ–¥–Ω–∏–π)
   - [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ multiline –∫–æ–º–∞–Ω–¥ (—Å –æ–±—Ä–∞—Ç–Ω—ã–º —Å–ª–µ—à–µ–º)
   - [ ] –ë–æ–ª–µ–µ —Ç–æ—á–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥—Ä–∞–Ω–∏—Ü –∫–æ–º–∞–Ω–¥
   - [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö shell –ø—Ä–æ–º–ø—Ç–æ–≤
   - [ ] –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ exit code –∫–æ–º–∞–Ω–¥—ã

3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–≤–æ–¥–∞** (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ù–∏–∑–∫–∏–π)
   - [ ] –£–¥–∞–ª–µ–Ω–∏–µ ANSI escape codes –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏
   - [ ] –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞
   - [ ] –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –≤ –≤—ã–≤–æ–¥–µ

### üí° –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –≤ –±—É–¥—É—â–µ–º

1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
   - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª—ã
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –±–æ–ª—å—à–∏—Ö –∏—Å—Ç–æ—Ä–∏–π

2. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**
   - –ü–æ–∏—Å–∫ –ø–æ regex –≤ –∏—Å—Ç–æ—Ä–∏–∏
   - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ—Ö–æ–∂–∏—Ö –∫–æ–º–∞–Ω–¥
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥
   - –≠–∫—Å–ø–æ—Ä—Ç –≤ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã (CSV, Markdown)
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É –º–∞—à–∏–Ω–∞–º–∏

3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
   - –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π –∏ —Ç–æ–∫–µ–Ω–æ–≤
   - –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –ø–æ regex

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (LazyVim)

–ü–ª–∞–≥–∏–Ω —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ —Ñ–∞–π–ª–µ `lua/plugins/terminal-history.lua`

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª: `:terminal`
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
3. –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Å—Ç–æ—Ä–∏—é:
   - –ò–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞: –Ω–∞–∂–º–∏—Ç–µ `Ctrl-T h` (–Ω–µ –≤—ã—Ö–æ–¥—è –∏–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞)
   - –ò–∑ normal mode: –Ω–∞–∂–º–∏—Ç–µ `<leader>th`
4. –ù–∞–≤–∏–≥–∞—Ü–∏—è –≤ –∏—Å—Ç–æ—Ä–∏–∏:
   - –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –∏ –Ω–∞–∂–º–∏—Ç–µ `<CR>` –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—ã–≤–æ–¥–∞
   - `<C-y>` - —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É
   - `r` - –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –∫–æ–º–∞–Ω–¥—É
   - `<C-d>` - —É–¥–∞–ª–∏—Ç—å –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```lua
require('terminal-history').setup({
  enabled = true,
  per_terminal = true,
  max_entries_per_terminal = 500,
  
  storage = {
    path = vim.fn.stdpath('data') .. '/terminal-history',
    persist_after_close = true,
    cleanup_after_days = 7,
  },
  
  filters = {
    ignore_commands = { 'clear', 'exit', 'ls', 'pwd' },
    min_command_length = 2,
    max_output_size = 1024 * 256, -- 256KB
  },
  
  keymaps = {
    open_history = '<leader>th',  -- Normal mode
    open_history_in_terminal = '<C-t>h',  -- Terminal mode
    list_terminals = '<leader>tH',
  },
})
```

## üìä –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

- **–§–∞–∑–∞ 1 (MVP)**: ‚úÖ –ó–ê–í–ï–†–®–ï–ù–ê - –ë–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–∞–±–æ—Ç–∞–µ—Ç
- **–§–∞–∑–∞ 2 (–†–∞—Å—à–∏—Ä–µ–Ω–∏—è)**: üöß –û–ñ–ò–î–ê–ï–¢ - Telescope –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ —É–ª—É—á—à–µ–Ω–∏—è
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚ö†Ô∏è –¢–†–ï–ë–£–ï–¢–°–Ø - –ù—É–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. –ü–µ—Ä–µ—Ö–≤–∞—Ç –∫–æ–º–∞–Ω–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –ø—Ä–æ–º–ø—Ç–æ–≤ - –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –ø—Ä–æ–º–ø—Ç–∞–º–∏
2. Multiline –∫–æ–º–∞–Ω–¥—ã –ø–æ–∫–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é
3. Exit code –∫–æ–º–∞–Ω–¥ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
4. ANSI –∫–æ–¥—ã –≤ –≤—ã–≤–æ–¥–µ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ö–æ–º–∞–Ω–¥—ã –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏—é

1. **–í–∫–ª—é—á–∏—Ç–µ —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏:**
   ```vim
   :TerminalHistoryDebug on
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ª–∞–¥–∫–∏:**
   ```vim
   :TerminalHistoryDebug show
   ```
   
   –≠—Ç–æ –æ—Ç–∫—Ä–æ–µ—Ç –±—É—Ñ–µ—Ä —Å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ (–Ω–∞–∂–º–∏—Ç–µ `q` –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è)

3. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–µ—Ä–º–∏–Ω–∞–ª –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω:**
   - –ü–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `:TerminalHistoryList`
   - –î–æ–ª–∂–µ–Ω –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∞–∫—Ç–∏–≤–Ω—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ–º–ø—Ç –≤–∞—à–µ–π –æ–±–æ–ª–æ—á–∫–∏:**
   - –ü–ª–∞–≥–∏–Ω –∏—â–µ—Ç –ø—Ä–æ–º–ø—Ç—ã, –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—â–∏–µ—Å—è –Ω–∞ `$`, `#`, –∏–ª–∏ `>`
   - –ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –º–æ–≥—É—Ç –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å—Å—è

5. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä–æ—Å—Ç—ã–µ –∫–æ–º–∞–Ω–¥—ã:**
   - `ls`, `pwd`, `echo test`
   - –ò–∑–±–µ–≥–∞–π—Ç–µ —Å–ª–æ–∂–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –Ω–∞ —ç—Ç–∞–ø–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

6. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã:**
   - –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è (`clear`, `exit`, etc.)
   - –ö–æ–º–∞–Ω–¥—ã –∫–æ—Ä–æ—á–µ 2 —Å–∏–º–≤–æ–ª–æ–≤ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

### –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏

- **–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:** `Ctrl-T` - –æ—Ç–∫—Ä—ã—Ç—å –∏—Å—Ç–æ—Ä–∏—é
- **–í normal mode:** `<leader>th` - –æ—Ç–∫—Ä—ã—Ç—å –∏—Å—Ç–æ—Ä–∏—é
- **Debug:** `:TerminalHistoryDebug on/off/show/clear`

### –ö–æ–º–∞–Ω–¥—ã –æ—Ç–ª–∞–¥–∫–∏

```vim
:TerminalHistoryDebug on     " –í–∫–ª—é—á–∏—Ç—å –æ—Ç–ª–∞–¥–∫—É
:TerminalHistoryDebug off    " –í—ã–∫–ª—é—á–∏—Ç—å –æ—Ç–ª–∞–¥–∫—É  
:TerminalHistoryDebug show   " –ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
:TerminalHistoryDebug clear  " –û—á–∏—Å—Ç–∏—Ç—å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
```

## üìù –ú–µ—Ç–æ–¥—ã –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –∫–æ–º–∞–Ω–¥

–ü–ª–∞–≥–∏–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç—Ä–∏ –º–µ—Ç–æ–¥–∞ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏:

1. **Timer-based capture** - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –±—É—Ñ–µ—Ä–µ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
2. **Enter key capture** - –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞–∂–∞—Ç–∏–µ Enter
3. **Prompt detection** - –∏—â–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–º–ø—Ç–æ–≤ ($, #, >)

## üìÖ –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–º–∫–∏

- **–§–∞–∑–∞ 1**: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–∞ (1 –¥–µ–Ω—å)
- **–§–∞–∑–∞ 2**: –û—Å—Ç–∞–ª–æ—Å—å 2-3 –¥–Ω—è —Ä–∞–±–æ—Ç—ã
- **–û–±—â–µ–µ –≤—Ä–µ–º—è**: 3-4 –¥–Ω—è –¥–ª—è –ø–æ–ª–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

---

*–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç—á—ë—Ç–∞: 2025-01-08*